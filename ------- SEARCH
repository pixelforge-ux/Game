<!-- Persistent Footer -->
    <div id="persistent-footer" class="footer-nav">
        <div class="footer-animated font-bold text-sm tracking-wide">ุทุฑุงุญ ุดุฏู ุชูุณุท ุณุฏ ุขุฑูู ููุณู</div>
        <a href="https://eitaa.com/Arvinweb" class="ads-button" onclick="app.openArvin(event)">
            <span class="icon">๐ข</span>
            <span>ุซุจุช ุชุจูุบุงุช</span>
        </a>
    </div>
=======
    <!-- Persistent Footer -->
    <footer id="persistent-footer" class="footer-nav">
        <div class="footer-animated font-bold text-sm tracking-wide mb-3" style="pointer-events: none;">ุทุฑุงุญ ุดุฏู ุชูุณุท ุณุฏ ุขุฑูู ููุณู</div>
        <button id="btn-ads-open" class="ads-button">๐ข ุซุจุช ุชุจูุบุงุช</button>
    </footer>

    <!-- Ads WebView Container -->
    <div id="ads-webview-container">
        <div style="padding:12px; background:#020617; color:white; display:flex; justify-content:space-between; align-items:center; border-bottom: 1px solid rgba(255,255,255,0.1);">
            <button id="btn-ads-close" style="background:none; border:none; color:white; font-weight:bold; font-size:1.1rem; padding: 5px 10px;">
                โ ุจุงุฒฺฏุดุช
            </button>
            <span class="font-bold">ูุฑู ุซุจุช ุชุจูุบ</span>
            <span style="width:40px"></span>
        </div>

        <div style="position:relative; flex:1;">
            <!-- Loading -->
            <div id="ads-loading">
                <div class="loader"></div>
                <div style="margin-top:12px; color:#94a3b8; font-size:14px">
                    ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ...
                </div>
            </div>

            <!-- Iframe -->
            <iframe
                id="ads-iframe"
                style="width:100%; height:100%; border:none; background:white"
                src="">
            </iframe>
        </div>
    </div>
>>>>>>> REPLACE

        // --- UI Elements ---
        const menuScreen = document.getElementById('menu-screen');
        const gameScreen = document.getElementById('game-screen');
=======
        // --- UI Elements ---
        const menuScreen = document.getElementById('menu-screen');
        const gameScreen = document.getElementById('game-screen');
        const adsContainer = document.getElementById('ads-webview-container');
        const adsIframe = document.getElementById('ads-iframe');
        const adsLoading = document.getElementById('ads-loading');
>>>>>>> REPLACE

        // --- App Global Logic ---
        window.app = {
            openArvin: (event) => {
                if (event) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                const url = 'https://eitaa.com/Arvinweb';
                try { if(window.playSound) window.playSound('click'); } catch(e) {}
                try {
                    if (window.Eitaa && window.Eitaa.WebApp && typeof window.Eitaa.WebApp.openEitaaLink === 'function') {
                        window.Eitaa.WebApp.openEitaaLink(url);
                        return;
                    }
                } catch (e) {
                    console.warn("Eitaa openEitaaLink failed, falling back", e);
                }
                window.open(url, '_blank');
            }
        };

        // --- Event Listeners ---
=======
        // --- App Global Logic ---
        function openAdsView() {
            const url = 'https://forms.gle/UHJ8mChHrEN4WFBa9';
            adsLoading.style.display = 'flex';
            adsIframe.src = url;
            adsContainer.classList.add('active');
            playSound('click');
        }

        adsIframe.onload = () => {
            adsLoading.style.display = 'none';
        };

        // --- Event Listeners ---
>>>>>>> REPLACE

        const settingsModal = document.getElementById('settings-modal');
        document.getElementById('start-pvp-btn').onclick = () => { state.mode = 'pvp'; startGame(); };
=======
        const settingsModal = document.getElementById('settings-modal');
        
        document.getElementById('btn-ads-open').onclick = () => {
            history.pushState({view:'ads'}, '');
            openAdsView();
        };

        document.getElementById('btn-ads-close').onclick = () => history.back();

        document.getElementById('start-pvp-btn').onclick = () => { state.mode = 'pvp'; startGame(); };
>>>>>>> REPLACE

        // --- Navigation Logic ---
        window.addEventListener('popstate', (event) => {
            const winOpen = !winModal.classList.contains('hidden');
            const historyOpen = !historyModal.classList.contains('hidden');
            const settingsOpen = !settingsModal.classList.contains('hidden');
            const gameOpen = !gameScreen.classList.contains('hidden');

            if (winOpen) {
                winModal.classList.add('hidden');
            } else if (historyOpen) {
                historyModal.classList.add('hidden');
            } else if (settingsOpen) {
                settingsModal.classList.add('hidden');
            } else if (gameOpen) {
=======
        // --- Navigation Logic ---
        window.addEventListener('popstate', (event) => {
            const adsOpen = adsContainer.classList.contains('active');
            const winOpen = !winModal.classList.contains('hidden');
            const historyOpen = !historyModal.classList.contains('hidden');
            const settingsOpen = !settingsModal.classList.contains('hidden');
            const gameOpen = !gameScreen.classList.contains('hidden');

            if (adsOpen) {
                adsContainer.classList.remove('active');
                adsIframe.src = ""; // Stop iframe loading/playing
            } else if (winOpen) {
                winModal.classList.add('hidden');
            } else if (historyOpen) {
                historyModal.classList.add('hidden');
            } else if (settingsOpen) {
                settingsModal.classList.add('hidden');
            } else if (gameOpen) {
>>>>>>> REPLACE